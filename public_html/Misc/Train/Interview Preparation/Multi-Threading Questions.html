<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>Multi-Threading Questions</title>
<!-- 2014-06-03 Tue 23:11 -->
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Shi Shougang" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center; }
  .todo   { font-family: monospace; color: red; }
  .done   { color: green; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: visible;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  pre.src-sh:before    { content: 'sh'; }
  pre.src-bash:before  { content: 'sh'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-R:before     { content: 'R'; }
  pre.src-perl:before  { content: 'Perl'; }
  pre.src-java:before  { content: 'Java'; }
  pre.src-sql:before   { content: 'SQL'; }

  table { border-collapse:collapse; }
  td, th { vertical-align:top;  }
  th.right  { text-align: center;  }
  th.left   { text-align: center;   }
  th.center { text-align: center; }
  td.right  { text-align: right;  }
  td.left   { text-align: left;   }
  td.center { text-align: center; }
  dt { font-weight: bold; }
  .footpara:nth-child(2) { display: inline; }
  .footpara { display: block; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="../../../assets/stylesheet.css" />
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Multi-Threading Questions</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">What is the difference between a thread and a process?</a>
<ul>
<li><a href="#sec-1-1">heavyweight vs lightweight</a></li>
<li><a href="#sec-1-2">create</a></li>
<li><a href="#sec-1-3">Sharing Resources</a></li>
<li><a href="#sec-1-4">Communication</a></li>
<li><a href="#sec-1-5">similarities</a></li>
</ul>
</li>
<li><a href="#sec-2">primary benefits to multithreading</a></li>
<li><a href="#sec-3">What synchronization primitives do you know, tell difference between them.</a></li>
<li><a href="#sec-4">What is a deadlock and what is a livelock.</a></li>
<li><a href="#sec-5">What is a race condition.</a></li>
<li><a href="#sec-6">What does the term 'lock-free' mean.</a></li>
<li><a href="#sec-7">What is the best way to terminate a thread.</a></li>
<li><a href="#sec-8">Why you shouldn't use TerminateThread-esque functions.</a></li>
<li><a href="#sec-9">Write a thread-safe producer/consumer buffer that can be accessed by one or more producer/consumers</a></li>
<li><a href="#sec-10">When might you choose to use threads on a single CPU system?</a></li>
<li><a href="#sec-11">How would you measure the context switch overhead between threads?</a></li>
<li><a href="#sec-12">How would you make a MT-safe hash table, while allowing for maximal concurrency?</a></li>
<li><a href="#sec-13">What can go wrong when you write thread code and how can you guard against them?</a></li>
<li><a href="#sec-14">What is the atomic operation and why do they matter?</a></li>
<li><a href="#sec-15">Name three thread design patterns</a></li>
<li><a href="#sec-16">Explain how a thread pool works</a></li>
<li><a href="#sec-17">Define: critical section</a></li>
<li><a href="#sec-18">What are four mutex types?</a></li>
<li><a href="#sec-19">Define: deadlock</a></li>
<li><a href="#sec-20">How can you prevent deadlocking from occurring?</a></li>
<li><a href="#sec-21">Define: race condition</a></li>
<li><a href="#sec-22">How can you prevent race conditions from occurring?</a></li>
<li><a href="#sec-23">Define: priority inversion</a></li>
<li><a href="#sec-24">Define: Condition Variable</a></li>
<li><a href="#sec-25">Define: (thread) barriers</a></li>
<li><a href="#sec-26">Semaphores</a></li>
<li><a href="#sec-27">Spinlocks</a></li>
<li><a href="#sec-28">Six synchronization primitives</a></li>
<li><a href="#sec-29">livestock</a></li>
<li><a href="#sec-30">What does the term 'lock-free' mean?</a></li>
<li><a href="#sec-31">"Busy waiting" and how it can be avoided</a></li>
<li><a href="#sec-32">c</a></li>
</ul>
</div>
</div>

<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1">What is the difference between a thread and a process?</h2>
<div class="outline-text-2" id="text-1">
</div><div id="outline-container-sec-1-1" class="outline-3">
<h3 id="sec-1-1">heavyweight vs lightweight</h3>
<div class="outline-text-3" id="text-1-1">
<p>
Processes are always used to execute "heavyweight" jobs such as
running different applications, while threads are always used to
execute smaller "lightweight" jobs such as auto saving.
</p>
</div>
</div>

<div id="outline-container-sec-1-2" class="outline-3">
<h3 id="sec-1-2">create</h3>
<div class="outline-text-3" id="text-1-2">
<p>
New threads are easily created, whereas new processes require
duplication of the parent process.
</p>

<p>
Creating a new process can be expensive. It takes time. (A call into
the operating system is needed, and if the process creation triggers
process rescheduling activity, the operating system's
context-switching mechanism will become involved.) IT takes memory.
(The entire process must be replicated.) 
</p>

<p>
Threads can be created without replicating an entire process.
</p>
</div>
</div>

<div id="outline-container-sec-1-3" class="outline-3">
<h3 id="sec-1-3">Sharing Resources</h3>
<div class="outline-text-3" id="text-1-3">
<p>
Independent processes share nothing. Each process runs in a separate
address space. Changes made to the parent processes donot affect the
child processes.
</p>

<p>
Threads share such process resources and global variables and file
descriptions.  If one thread
changes the value of any such resource, the change will be evident to
any other thread in the process, if anyone cares to look. The sharing
of process resources among threads is one of the multithreaded
programming model's major performance advantages, as well as one of
its most difficult programming aspects. Having all of this context
available to all threads in the same memory facilitates communication
between threads. However, at the same time, it makes it easy to
introduce errors of the sort in which one thread affects the value of
a variable used by another thread in ways the other thread did not
expect.
</p>

<p>
Then switching between threads is much simpler and faster then
switching between processes.
</p>
</div>
</div>

<div id="outline-container-sec-1-4" class="outline-3">
<h3 id="sec-1-4">Communication</h3>
<div class="outline-text-3" id="text-1-4">
<p>
Threads can directly communicate with other threads of its process;
processes must use inter-process communication mechanisms to
communicate with sibling processes.
</p>

<p>
Multiple processes can use any of the many other UNIX Interprocess
Communication (IPC) mechanisms: sockets, shared memory, and messages,
to name a few. The multiprocess version of our program uses shared
memory, but the other methods are equally valid. Even the waitpid call
in our program could be used to exchange information, if the program
checked its return value. However, in the multiprocess world, all
types of IPC involve a call into the operating system—to initialize
shared memory or a message structure, for instance. This makes
communication between processes more expensive than communication
between threads. Add to this the cost of
interprocess communication and synchronization of shared data, which
also may involve calls into the operating system kernel.
</p>

<p>
When processes
synchronize, they usually have to issue system calls, a relatively
expensive operation that involves trapping into the kernel. But
threads can synchronize by simply monitoring a variable—in other
words, staying within the user address space of the program.
</p>
</div>
</div>

<div id="outline-container-sec-1-5" class="outline-3">
<h3 id="sec-1-5">similarities</h3>
<div class="outline-text-3" id="text-1-5">
<p>
A thread can do anything that a process can do. They are both able to
reproduce(Processes create child process and threads create more
threads.), and they both have ID, priority and etc.
</p>
</div>
</div>
</div>
<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2">primary benefits to multithreading</h2>
<div class="outline-text-2" id="text-2">
<p>
<a href="http://www.quora.com/What-is-the-difference-between-a-process-and-a-thread">http://www.quora.com/What-is-the-difference-between-a-process-and-a-thread</a>
</p>

<p>
There are four primary benefits to multithreading:
</p>

<ul class="org-ul">
<li>Programming abstraction. Dividing up work and assigning each
division to a unit of execution (a thread) is a natural approach to
many problems. Programming patterns that utilize this approach
include the reactor, thread-per-connection, and thread pool
patterns. Some, however, view threads as an anti-pattern. The
inimitable Alan Cox summed this up well with the quote, "threads are
for people who can't program state machines."
</li>

<li>Parallelism. In machines with multiple processors, threads provide
an efficient way to achieve true parallelism. As each thread
receives its own virtualized processor and is an
independently-schedulable entity, multiple threads may run on
multiple processors at the same time, improving a system's
throughput. To the extent that threads are used to achieve
parallelism—that is, there are no more threads than processors—the
"threads are for people who can't program state machines" quote does
not apply.
</li>

<li>Blocking I/O. Without threads, blocking I/O halts the whole process.
This can be detrimental to both throughput and latency. In a
multithreaded process, individual threads may block, waiting on I/O,
while other threads make forward progress. Asynchronous &amp;
non-blocking I/O are alternative solutions to threads for this
issue.
</li>

<li>Memory savings. Threads provide an efficient way to share memory yet
utilize multiple units of execution. In this manner they are an
alternative to multiple processes.
</li>
</ul>

<p>
The cost of these benefits of threading are increased complexity in
the form of needing to manage concurrency through mechanisms such as
mutexes and condition variables. Given the growing trend toward
processors sporting multiple cores and systems sporting multiple
processors, threading is only going to become a more important tool in
system programming.
</p>


<p>
Advantages and Disadvantages
</p>

<p>
Thread Advantages
</p>

<ul class="org-ul">
<li>Threads are memory efficient. Many threads can be efficiently contained within a single EXE, while each process can incur the overhead of an entire EXE.
</li>
<li>Threads share a common program space, which among other things, means that messages can be passed by queuing only a pointer to the message. Since processes do not share a common program space, the kernel must either copy the entire message from process A's program space to process B's program space - a tremendous disadvantage for large messages, or provide some mechanism by which process B can access the message.
</li>
<li>Thread task switching time is faster, since a thread has less context to save than a process.
</li>
<li>With threads the kernel is linked in with the user code to create a single EXE. This means that all the kernel data structures like the ready queue are available for viewing with a debugger. This is not the case with a process, since the process is an autonomous application and the kernel is separate, which makes for a less flexible environment.
</li>
</ul>

<p>
Thread Disadvantages
</p>

<ul class="org-ul">
<li>Threads are typically not loadable. That is, to add a new thread, you must add the new thread to the source code, then compile and link to create the new executable. Processes are loadable, thus allowing a multi-tasking system to be characterized dynamically. For example, depending upon system conditions, certain processes can be loaded and run to characterize the system. However, the same can be accomplished with threads by linking in all the possible threads required by the system, but only activating those that are needed, given the conditions. The really big advantage of loadability is that the process concept allows processes (applications) to be developed by different companies and offered as tools to be loaded and used by others in their multi-tasking applications.
</li>
<li>Threads can walk over the data space of other threads. This cannot
happen with processes. If an attempt is made to walk on another
process an exception error will occur.
</li>
</ul>
</div>
</div>
<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3">What synchronization primitives do you know, tell difference between them.</h2>
</div>
<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4">What is a deadlock and what is a livelock.</h2>
</div>
<div id="outline-container-sec-5" class="outline-2">
<h2 id="sec-5">What is a race condition.</h2>
</div>
<div id="outline-container-sec-6" class="outline-2">
<h2 id="sec-6">What does the term 'lock-free' mean.</h2>
</div>
<div id="outline-container-sec-7" class="outline-2">
<h2 id="sec-7">What is the best way to terminate a thread.</h2>
</div>
<div id="outline-container-sec-8" class="outline-2">
<h2 id="sec-8">Why you shouldn't use TerminateThread-esque functions.</h2>
</div>
<div id="outline-container-sec-9" class="outline-2">
<h2 id="sec-9">Write a thread-safe producer/consumer buffer that can be accessed by one or more producer/consumers</h2>
</div>
<div id="outline-container-sec-10" class="outline-2">
<h2 id="sec-10">When might you choose to use threads on a single CPU system?</h2>
</div>
<div id="outline-container-sec-11" class="outline-2">
<h2 id="sec-11">How would you measure the context switch overhead between threads?</h2>
</div>
<div id="outline-container-sec-12" class="outline-2">
<h2 id="sec-12">How would you make a MT-safe hash table, while allowing for maximal concurrency?</h2>
</div>
<div id="outline-container-sec-13" class="outline-2">
<h2 id="sec-13">What can go wrong when you write thread code and how can you guard against them?</h2>
<div class="outline-text-2" id="text-13">
<p>
Basically, the big three of threading problems are deadlock, races and
starvation. 
</p>

<p>
The simplest deadlock condition is when there are two threads and
thread A can't progress until thread B finishes, while thread B can't
progress until thread A finishes. This is usually because both need
the same two resources to progress, A has one and B has the other.
Various symmetry breaking algorithms can prevent this in the two
thread or larger circle cases. 
</p>

<p>
Races happen when one thread changes the state of some resource when
another thread is not expecting it (such as changing the contents of a
memory location when another thread is part way through reading, or
writing to that memory). Locking methods are the key here. (Some lock
free methods and containers are also good choices for this. As are
atomic operations, or transaction based operations.) 
</p>

<p>
Starvation happens when a thread needs a resource to proceed, but
can't get it. The resource is constantly tied up by other threads and
the one that needs it can't get in. The scheduling algorithm is the
problem when this happens. Look at algorithms that assure access.
</p>
</div>
</div>

<div id="outline-container-sec-14" class="outline-2">
<h2 id="sec-14">What is the atomic operation and why do they matter?</h2>
<div class="outline-text-2" id="text-14">
<p>
Atomic operations are operations that can't lose control of the
resources they have while executing. Functionally, they are equivalent
to operations that happen in a single clock tick on a simple
non-pipelined processor. In reality, most take more than a tick but
are protected while they execute. They are immune to race conditions,
and that makes them useful. 
</p>
</div>
</div>

<div id="outline-container-sec-15" class="outline-2">
<h2 id="sec-15">Name three thread design patterns</h2>
<div class="outline-text-2" id="text-15">
<ol class="org-ol">
<li>Thread pool
</li>
<li>Peer
</li>
<li>Pipeline
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-16" class="outline-2">
<h2 id="sec-16">Explain how a thread pool works</h2>
<div class="outline-text-2" id="text-16">
<p>
One thread dispatches other threads to do useful work which are
usually part of a worker thread pool. This thread pool is usually
pre-allocated before the boss(or master) begins dispatching threads to
work. Although threads are lightweight, they still incur overhead when
they are created.
</p>

<p>
If the boss thread becomes a worker thread once it's done starting
other worker threads then this is a Peer Thread Design Pattern.
</p>
</div>
</div>

<div id="outline-container-sec-17" class="outline-2">
<h2 id="sec-17">Define: critical section</h2>
<div class="outline-text-2" id="text-17">
<p>
The code between lock and unlock calls to a mutex.
</p>
</div>
</div>

<div id="outline-container-sec-18" class="outline-2">
<h2 id="sec-18">What are four mutex types?</h2>
<div class="outline-text-2" id="text-18">
<ul class="org-ul">
<li>Recursive: allows a thread holding the lock to acquire the same lock
again which may be necessary for recursive algorithms.
</li>
<li>Queuing: allows for fairness in lock acquisition by providing FIFO
ordering to the arrival of lock requests. Such mutexes may be slower
due to increased overhead and the possibility of having to wake
threads next in line that may be sleeping.
</li>
<li>Reader/Writer: allows for
</li>
</ul>
</div>
</div>

<div id="outline-container-sec-19" class="outline-2">
<h2 id="sec-19">Define: deadlock</h2>
</div>
<div id="outline-container-sec-20" class="outline-2">
<h2 id="sec-20">How can you prevent deadlocking from occurring?</h2>
</div>
<div id="outline-container-sec-21" class="outline-2">
<h2 id="sec-21">Define: race condition</h2>
</div>
<div id="outline-container-sec-22" class="outline-2">
<h2 id="sec-22">How can you prevent race conditions from occurring?</h2>
</div>
<div id="outline-container-sec-23" class="outline-2">
<h2 id="sec-23">Define: priority inversion</h2>
</div>
<div id="outline-container-sec-24" class="outline-2">
<h2 id="sec-24">Define: Condition Variable</h2>
</div>
<div id="outline-container-sec-25" class="outline-2">
<h2 id="sec-25">Define: (thread) barriers</h2>
</div>
<div id="outline-container-sec-26" class="outline-2">
<h2 id="sec-26">Semaphores</h2>
</div>
<div id="outline-container-sec-27" class="outline-2">
<h2 id="sec-27">Spinlocks</h2>
</div>
<div id="outline-container-sec-28" class="outline-2">
<h2 id="sec-28">Six synchronization primitives</h2>
</div>
<div id="outline-container-sec-29" class="outline-2">
<h2 id="sec-29">livestock</h2>
</div>
<div id="outline-container-sec-30" class="outline-2">
<h2 id="sec-30">What does the term 'lock-free' mean?</h2>
</div>
<div id="outline-container-sec-31" class="outline-2">
<h2 id="sec-31">"Busy waiting" and how it can be avoided</h2>
</div>


<div id="outline-container-sec-32" class="outline-2">
<h2 id="sec-32">c</h2>
<div class="outline-text-2" id="text-32">
<p>
<a href="http://quizlet.com/24524062/c-multithreading-practice-interview-questions-flash-cards/">http://quizlet.com/24524062/c-multithreading-practice-interview-questions-flash-cards/</a>
</p>


<p>
<a href="http://www.devarticles.com/c/a/Cplusplus/Multithreading-in-C/">http://www.devarticles.com/c/a/Cplusplus/Multithreading-in-C/</a>
</p>

<p>
<a href="http://www.careercup.com/page?pid=threads-interview-questions">http://www.careercup.com/page?pid=threads-interview-questions</a>
</p>

<p>
c++ multithreading interview questions
</p>


<div class="org-src-container">

<pre class="src src-python"></pre>
</div>

<div class="org-src-container">

<pre class="src src-c++"></pre>
</div>


<div class="org-src-container">

<pre class="src src-sh"></pre>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Shi Shougang</p>
<p class="date">Created: 2014-06-03 Tue 23:11</p>
<p class="creator"><a href="http://www.gnu.org/software/emacs/">Emacs</a> 24.3.50.1 (<a href="http://orgmode.org">Org</a> mode 8.2.3a)</p>
<p class="validation"><a href="http://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
